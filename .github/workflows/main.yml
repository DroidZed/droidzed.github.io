name: Website CI

on: push

jobs:

  prod-ready:
    runs-on: ubuntu-latest

    steps:
      - name: Prod 🚀
        run: cat "NODE_ENV=production" > .env

  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v2
        with:
          persist-credentials: false

      - name: Install 🔧
        run: npm install

      - name: Pre-Process 🔩
        run: npm run preprocess

      - name: Minify CSS 🌠
        run: npm run minify-css